import createHandler from "@api/handler";
import {
  get<%- p.pascalName %>,
  update<%- p.pascalName %>,
  delete<%- p.pascalName %>,
} from "@lib/<%- p.paramName %>/api/<%- p.camelName %>Service";

const handler = createHandler({ attachParams: true });

handler
  .get(async (req, res) => {
    const id = req.query.id as string;
    const <%- p.camelName %> = await get<%- p.pascalName %>({ id });
    res.status(200).json(<%- p.camelName %>);
  })
  .put(async (req, res) => {
    const updated = await update<%- p.pascalName %>(req.body);
    res.status(200).json(updated);
  })
  .delete(async (req, res) => {
    const id = req.query.id as string;
    const deleted = await delete<%- p.pascalName %>({ id });
    res.status(200).json(deleted);
  });

export default handler;
